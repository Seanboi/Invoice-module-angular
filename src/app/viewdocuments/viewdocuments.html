<div class="container">
  <h2>Approval Dashboard</h2>

  <form #filterForm="ngForm" (ngSubmit)="onFilterChange()">
    <label for="statusFilter">Filter by Status:</label>
    <select
      id="statusFilter"
      name="status"
      [(ngModel)]="selectedFilter"
      (change)="onFilterChange()"
    >
      <option value="all">All</option>
      <option value="pending">Pending</option>
      <option value="approved">Approved</option>
      <option value="rejected">Rejected</option>
    </select>
  </form>

  @if(approvals.length > 0){
  <table class="approval-table">
    <thead>
    <tr>
      <th>ID</th>
      <th>Status</th>
      <th>Date</th>
      <th>Type</th>
      <th>Payload</th>
    </tr>
    </thead>
    <tbody>
      @for(approval of approvals; track approval){
    <tr >
      <td>{{ approval.id }}</td>
      <td>{{ approval.approval }}</td>
      <td>{{ approval.requestedAt | date: 'medium' }}</td>
      <td>{{ approval.objectType }}</td>
      <td>
        <button (click)="viewPayload(approval.tempJson)">View</button>
      </td>
    </tr>
      }
    </tbody>
  </table>
  } @else {
    <p>No approvals found for the selected filter.</p>
  }
</div>
